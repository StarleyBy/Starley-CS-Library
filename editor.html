<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Starley Medical Editor</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/editor.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- CodeMirror CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
    <!-- CodeMirror JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/markdown/markdown.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/htmlmixed/htmlmixed.min.js"></script>
</head>
<body>
    <header>
        <h1>ğŸ“š Medical library</h1>
        <nav>
            <a href="index.html">Library</a>
            <a href="editor.html">Editor</a>
            <a href="mdconvert.html">MD convert</a>
        </nav>
    </header>
    <div class="editor-shell">
        <aside class="editor-toolbar">
            <!-- Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² -->
            <div class="tool-group loader-group">
                <h4>ğŸ“‚ Load</h4>
                <select id="select-book"><option value="">Select a book...</option></select>
                <select id="select-chapter" disabled><option value="">Select a chapter...</option></select>
                
                <div class="icon-grid" style="margin-top: 10px;">
                    <button id="btn-load-original" class="btn-load" style="background: #3498db;" title="Load Original Version">ğŸ“„</button>
                    <button id="btn-load-russian" class="btn-load" style="background: #e74c3c;" title="Load Russian Version">ğŸ‡·ğŸ‡º</button>
                    <button id="btn-load-starley" class="btn-load" style="background: #27ae60;" title="Load Starley Version">â­</button>
                </div>
            </div>

            <!-- Ğ¦Ğ²ĞµÑ‚Ğ½Ñ‹Ğµ Ğ¾Ğ²Ğ°Ğ»Ñ‹ -->
            <div class="tool-group">
                <h4>â­• Color Oval (3D)</h4>
                <div class="color-grid" id="oval-colors"></div>
            </div>

            <!-- ĞœĞ°Ñ€ĞºĞµÑ€Ñ‹ -->
            <div class="tool-group">
                <h4>ğŸ–ï¸ Marker</h4>
                <div class="color-grid" id="marker-colors"></div>
            </div>

            <!-- Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑ„Ñ„ĞµĞºÑ‚Ñ‹ -->
            <div class="tool-group">
                <h4>âœ¨ Special Effects</h4>
                <div class="icon-grid">
                    <button onclick="wrapInEffect('luminous-blue')" title="Luminous Blue">ğŸ’</button>
                    <button onclick="wrapInEffect('luminous-green')" title="Luminous Green">ğŸ’š</button>
                    <button onclick="wrapInEffect('luminous-red')" title="Luminous Red">â¤ï¸</button>
                    <button onclick="wrapInEffect('luminous-yellow')" title="Luminous Yellow">ğŸ’›</button>
                    <button onclick="wrapInEffect('luminous-purple')" title="Luminous Purple">ğŸ’œ</button>
                    <button onclick="wrapInEffect('cyber-neon cyber-neon-pink')" title="Neon Pink">âš¡</button>
                    <button onclick="wrapInEffect('cyber-neon cyber-neon-blue')" title="Neon Blue">ğŸ”·</button>
                    <button onclick="wrapInEffect('cyber-glitch')" title="Glitch Effect">ğŸ“º</button>
                    <button onclick="wrapInBlock('luminous-cyan')" title="Luminous Cyan">ğŸ’ </button>
                    <button onclick="wrapInBlock('luminous-amber')" title="Luminous Amber">ğŸ”¥</button>
                </div>
            </div>

            <!-- Info Boxes -->
            <div class="tool-group">
                <h4>ğŸ“¦ Info Boxes</h4>
                <div class="icon-grid">
                    <button onclick="wrapInInfoBox('info-box')" title="Default Info Box">ğŸ“¦</button>
                    <button onclick="wrapInInfoBox('info-box info-box-info')" title="Info Box">â„¹ï¸</button>
                    <button onclick="wrapInInfoBox('info-box info-box-success')" title="Success Box">âœ…</button>
                    <button onclick="wrapInInfoBox('info-box info-box-warning')" title="Warning Box">âš ï¸</button>
                    <button onclick="wrapInInfoBox('info-box info-box-danger')" title="Danger Box">ğŸš¨</button>
                    <button onclick="addDetails()" title="Hidden Text (Details)">â–¶ï¸</button>
                </div>
            </div>

            <!-- Ğ¦Ğ²ĞµÑ‚Ğ° Ñ‚ĞµĞºÑÑ‚Ğ° -->
            <div class="tool-group">
                <h4>ğŸ¨ Text Color</h4>
                <div class="color-grid" id="text-colors"></div>
            </div>

            <!-- Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ñ‹Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸ -->
            <div class="tool-group">
                <h4>ğŸ“¦ Standard Blocks</h4>
                <div class="icon-grid">
                    <button onclick="insertAdmonition('note', 'ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ')" title="Note Block">â„¹ï¸</button>
                    <button onclick="insertAdmonition('tip', 'Ğ¡Ğ¾Ğ²ĞµÑ‚')" title="Tip Block">ğŸ’¡</button>
                    <button onclick="insertAdmonition('info', 'Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ')" title="Info Block">ğŸ“Œ</button>
                    <button onclick="insertAdmonition('warning', 'ĞŸÑ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğµ')" title="Warning Block">âš ï¸</button>
                    <button onclick="insertAdmonition('danger', 'ĞĞ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ')" title="Danger Block">ğŸš¨</button>
                    <button onclick="insertAdmonition('caution', 'ĞÑÑ‚Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ğ¾')" title="Caution Block">âš¡</button>
                </div>
            </div>

            <!-- ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½ÑĞºĞ¸Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸ -->
            <div class="tool-group">
                <h4>ğŸ¥ Medical Blocks</h4>
                <div class="icon-grid-2">
                    <button onclick="insertAdmonition('dosage', 'Ğ”Ğ¾Ğ·Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°')" title="Dosage Block">ğŸ’‰</button>
                    <button onclick="insertAdmonition('contraindication', 'ĞŸÑ€Ğ¾Ñ‚Ğ¸Ğ²Ğ¾Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ñ')" title="Contraindication Block">ğŸš«</button>
                    <button onclick="insertAdmonition('side-effect', 'ĞŸĞ¾Ğ±Ğ¾Ñ‡Ğ½Ñ‹Ğµ ÑÑ„Ñ„ĞµĞºÑ‚Ñ‹')" title="Side Effect Block">âš ï¸</button>
                    <button onclick="insertAdmonition('clinical', 'ĞšĞ»Ğ¸Ğ½Ğ¸ĞºĞ°')" title="Clinical Block">ğŸ¥</button>
                    <button onclick="insertAdmonition('anatomy', 'ĞĞ½Ğ°Ñ‚Ğ¾Ğ¼Ğ¸Ñ')" title="Anatomy Block">ğŸ«€</button>
                    <button onclick="insertAdmonition('physiology', 'Ğ¤Ğ¸Ğ·Ğ¸Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ')" title="Physiology Block">ğŸ§¬</button>
                    <button onclick="insertAdmonition('surgery', 'Ğ¥Ğ¸Ñ€ÑƒÑ€Ğ³Ğ¸Ñ')" title="Surgery Block">ğŸ”ª</button>
                    <button onclick="insertAdmonition('icu', 'Ğ ĞµĞ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ñ')" title="ICU Block">ğŸš‘</button>
                    <button onclick="insertAdmonition('evidence', 'Ğ”Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»ÑŒÑÑ‚Ğ²Ğ°')" title="Evidence Block">ğŸ“Š</button>
                    <button onclick="insertAdmonition('protocol', 'ĞŸÑ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ»')" title="Protocol Block">ğŸ“‹</button>
                </div>
            </div>

            <!-- ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ -->
            <div class="tool-group">
                <h4>ğŸ”— Navigation</h4>
                <div class="icon-grid">
                    <button onclick="insertLink()" title="Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑÑÑ‹Ğ»ĞºÑƒ Ğ½Ğ° Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½">ğŸ”—</button>
                    <button onclick="insertAnchor()" title="Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞºĞ¾Ñ€ÑŒ Ğ² Ğ¼ĞµÑÑ‚Ğµ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ">âš“</button>
                    <button onclick="insertBackLink()" title="Ğ£Ğ¼Ğ½Ğ°Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ° - Ğ²ĞµÑ€Ğ½ĞµÑ‚ Ğº Ğ»ÑĞ±Ğ¾Ğ¹ ÑÑÑ‹Ğ»ĞºĞµ">â†©ï¸</button>
                </div>
            </div>

            <!-- Ğ Ğ°Ğ·Ğ¼ĞµÑ€ ÑˆÑ€Ğ¸Ñ„Ñ‚Ğ° Ğ¸ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ¸ -->
            <div class="tool-group">
                <h4>ğŸ“¤ Font Size & Headers</h4>
                <div class="icon-grid-4" style="margin-bottom: 8px;">
                    <button onclick="wrapInFontSize(60)" title="60% Font Size" style="font-size: 0.9em;">Aâ»</button>
                    <button onclick="wrapInFontSize(75)" title="75% Font Size" style="font-size: 1em;">Aâ»</button>
                    <button onclick="wrapInFontSize(90)" title="90% Font Size" style="font-size: 1.1em;">A</button>
                    <button onclick="wrapInFontSize(110)" title="110% Font Size" style="font-size: 1.3em;">A</button>
                    <button onclick="wrapInFontSize(125)" title="125% Font Size" style="font-size: 1.4em;">Aâº</button>
                </div>
                <div class="icon-grid-2" style="margin-bottom: 8px;">
                    <button onclick="wrapInHeader(1)" title="Header 1" style="font-size: 1.4em; font-weight: bold;">#</button>
                    <button onclick="wrapInHeader(2)" title="Header 2" style="font-size: 1.3em; font-weight: bold;">##</button>
                    <button onclick="wrapInHeader(3)" title="Header 3" style="font-size: 1.2em;">###</button>
                    <button onclick="wrapInHeader(4)" title="Header 4" style="font-size: 1.1em;">####</button>
                    <button onclick="wrapInHeader(5)" title="Header 5">#####</button>
                    <button onclick="wrapInHeader(6)" title="Header 6">######</button>
                </div>
                <div class="icon-grid">
                    <button onclick="wrapInSuperscript()" title="Superscript (Ğ²ĞµÑ€Ñ…Ğ½Ğ¸Ğ¹ Ğ¸Ğ½Ğ´ĞµĞºÑ)" style="font-size: 1.1em;">X<sup style="font-size: 0.7em;">2</sup></button>
                    <button onclick="wrapInSubscript()" title="Subscript (Ğ½Ğ¸Ğ¶Ğ½Ğ¸Ğ¹ Ğ¸Ğ½Ğ´ĞµĞºÑ)" style="font-size: 1.1em;">H<sub style="font-size: 0.7em;">2</sub></button>
                    <button onclick="wrapInBold()" title="Bold (Ğ¿Ğ¾Ğ»ÑƒĞ¶Ğ¸Ñ€Ğ½Ñ‹Ğ¹)" style="font-weight: bold; font-size: 1.2em;">B</button>
                    <button onclick="wrapInItalic()" title="Italic (ĞºÑƒÑ€ÑĞ¸Ğ²)" style="font-style: italic; font-size: 1.2em;">I</button>
                </div>
            </div>

            <!-- Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ -->
            <div class="tool-group export-group">
                <h4>ğŸ’¾ Save</h4>
                <input type="text" id="export-filename" placeholder="chapter-01-starley.md">
                <button id="btn-download" class="btn-success" title="Download Markdown File">ğŸ“¤ Download</button>
            </div>
        </aside>

        <main class="editor-main">
            <div class="pane-header">Markdown Source</div>
            <textarea id="markdown-input" placeholder="Text will appear here after loading or paste it manually..."></textarea>
        </main>

        <section class="editor-preview-pane">
            <div class="pane-header">Live Preview</div>
            <div id="editor-preview" class="content"></div>
        </section>
    </div>

    <script src="assets/js/config.js"></script>
    <script src="assets/js/editor.js"></script>
</body>
</html>
